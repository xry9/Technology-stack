https://cwiki.apache.org/confluence/display/HADOOP2/QwertyManiac+BuildingHadoopTrunk
安装必要的软件
yum -y install gcc*
yum -y install cmake
yum -y install glibc-headers
yum -y install openssl-devel
yum -y install svn
yum -y install git
yum -y install ncurses-devel
yum -y install lzo-devel
yum -y install autoconf
yum -y install libtool

rpm -qa|grep java
rpm -e --nodeps ...
---------------
export JAVA_HOME=/usr/local/app/jdk1.8.0_77
export ANT_HOME=/usr/local/app/apache-ant-1.9.7
export FINDBUGS_HOME=/usr/local/app/findbugs-3.0.1
export M2_HOME=/usr/local/app/apache-maven-3.3.9
export PATH=$PATH:$JAVA_HOME/bin:$ANT_HOME/bin:$FINDBUGS_HOME/bin:$M2_HOME/bin
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar
-----------------------
在主目录下创建.m2目录，将repository文件丢入
-----------------------
进入protobuf所在目录，依次执行（protobuf-2.5.0.tar.gz）
./configure
make 
make install
protoc --version
---------------------------
进入hadoop源代码目录，输入
mvn clean package -DskipTests -Pdist,native -Dtar
会出现这个错误
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-javadoc-plugin:2.8.1:jar (module-javadocs) on project hadoop-annotations: MavenReportException: Error while creating archive:
[ERROR] Exit code: 1 - /home/app/hadoop-2.6.0-src/hadoop-common-project/hadoop-annotations/src/main/java/org/apache/hadoop/classification/InterfaceStability.java:27: error: unexpected end tag: </ul>
加上这个（ -Dmaven.javadoc.skip=true）就好了，即：mvn clean package -DskipTests -Pdist,native -Dtar -Dmaven.javadoc.skip=true
---------------------------
hadoop-2.6.0-src/hadoop-dist/target 这个目录下会生成编译结果
========================
如果jar包下载过慢可以试着更改国内镜像，只要在setting文件的<mirrors></mirrors>内加入即可
<mirror>
<id>CN</id>
<name>OSChina Central</name>
<url>http://maven.oschina.net/content/groups/public/</url>
<mirrorOf>central</mirrorOf>
</mirror>
文档链接：http://www.cnblogs.com/yjmyzz/p/compile-hadoop-2_6_0-source-code-in-centos_x64.html