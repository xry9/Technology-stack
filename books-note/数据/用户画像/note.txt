1.1.1 画像简介
  用户画像即用户信息标签化, 通过收集用户的【社会属性, 消费习惯, 偏好特征】等各个维度的数据, 对用户或产品【特征属性进行刻画】... 为数据驱动运营奠定基础

1.3 
  用户画像总体包括:
    数据指标体系: 根据业务线梳理, 包括: 用户属性 用户行为 用户消费 风险控制【等维度的指标体系】
	标签数据开发: 打通画像数据与各业务系统间的通路, 提供接口服务等开发内容
    画像产品化, 模块包括: 标签视图 用户标签查询 用户分群 透视分析, 
	  这些很多类似于 BI 产品, 面试时遇到说他们有 BI 产品的问问他怎么做的
	画像应用: 用户特征分析 短信 邮件 站内信 Push消息的精准推送 【客服针对用户的不同话术】 针对高价值用户的极速退货退款等VIP服务应用
1.4.1 
  a. 用户画像的服务对象包括运营人员和数据分析人员, 对运营人员来说他们需要分析用户特征定位用户偏好, 做商品或内容的个性化推送, 以【提高点击转化率】,
  所以画像的侧重点就落在了用户个人行为偏好上. 就用户分析人员来说他们需要分析用户行为特殊, 做好用户流失预警工作, 还可根据用户消费偏好, 做更精准的营销
  b. 需求场景讨论与明确, 在本阶段数据运营人员需要根据与需求方的沟通结果, 输出产品用户画像需求文档, 在文档中明确应用场景,
  c. 应用场景用数据口径确认
  d. 特征选取与模型数据落表

1.6.1
  a. 【提高用户购物体验, 通过精准推荐提升点击转化率(有个前提是产品线扩张 信息过载, 说白了就是商品太多)】
  b. 运营考虑建立用户流失预警机制
1.6.3
CREATE TABLE `dw.userprofile_attritube_all`(
`userid` string COMMENT 'userid', 
`labelweight` string COMMENT '标签权重')
COMMENT 'userid 用户画像数据' PARTITIONED BY ( `data_date` string COMMENT '数据日期', `theme` string COMMENT '二级主题', `labelid` string COMMENT '标签id')

CREATE TABLE dw.userprofile_act_feature_append (
 labelid STRING COMMENT '标签id', 
 cookieid STRING COMMENT '用户id', 
 act_cnt int COMMENT '行为次数', 
 tag_type_id int COMMENT '标签类型编码', 
 act_type_id int COMMENT '行为类型编码') 
comment '用户画像-用户行为标签表' 
PARTITIONED BY (data_date STRING COMMENT '数据日期')
-- 搜房的特征库是更细一级粒度的, 有 actionTime, 其实就应该是这样, 有最细粒度的行为, 还有次细粒度的特征

【表1-10, 表1-11】

第 2 章
  数据指标体系是建立用户画像的关键环节，也是标签开发前要进行的工作, 具体来说就是结合企业业务情况来设定相关指标 
  建立的标签按【标签类型】可分为: 统计类 规则类 挖掘类, 【从维度看】可将其分为: 用户属性类 用户行为类 用户消费类 风险控制类 社交属性类
 
2.1.1 
  用户属性的标签可以提供客服电话服务, 为运营人员了解用户基本情况提供帮助
  表2-1
  RFM 最近一次消费 (Recency) 消费频率 (Frequency) 消费金额 (Monetary)
  对于规则类标签的开发需要进行数据调研, 对于【用户价值划分 RFM】, 如何确定一个用户是重要价值用户还是一般价值用户, 对于用户活跃度的划分(高低流失)
  -- 对于用户的管理好像有三个方面, 用户价值 用户活跃度 用户生命周期
2.2 
  用户行为是另一种刻画用户的常见维度, 【通过用户行为可以挖掘其偏好和特征】, 常见的行为维度指标包括: 用户订单相关行为, 下单/访问行为... 【表 2-2】
2.3 用户消费维度
  对于用户消费维度指标体系的建设, 可以从用户浏览 加购 下单 收藏 搜索商品对应的品类下手, 品类越细越精确, 给用户推荐或营销商品的准确性越高
  根据用户行为对商品品类建设指标体系, 精确下商品三级品类, 【图2-1 表2-3】
2.4 风险控制维度
  互联网企业的用户可能遇到 薅羊毛 刷单 借货欺诈等行为, 互联网公司需要在风险控制维度建立起相关指标体系, 有效控制平台的不良用户 【表 2-4】
2.5 社交属性维度
  【表 2-5】
2.6 其它常见标签划分方式
  【图2-4】
2.7 标签命名方式

3.1.1 
  数据仓库之父说: 数据仓库是一个 面向主题的 集成的 非易失的 随时间变化的 可以用来支持管理人员决策的数据集合
  面向主题: 业务数据库中的数据主要针对事务处理, 各业务系统之间是相互隔离的, 而数据仓库中的数据是按照一定的主题进行组织的
  单事务事实表 多事务事实表
  【维度主要是对事实属性的各方面的描述】
3.1.3 标签汇聚
  标签汇聚后将每个用户身上的全量标签汇聚到一个字段中, 汇聚成 json 字符串, 用 map 类型也行吧
3.1.4 ID-MAP
  通过 ID-MApping 能够把用户在不同场景下的行为串联起来, 消除数据孤岛, userid 与 cookieId 
  一个用户可以在多个设备上登录, 一个设备也能被多个用户登录, 所以考虑用缓慢变化维表来记录不同时间点的状态变化, 拉链
3.2.1
  【图3-11】 图3-12
3.2.2

图3-16
图3-19下的代码清单
图3-21下的代码清单
图3-25下的代码清单

3.4.3

第 4 章
  标签数据开发是用户画像体系搭建中最主要的环节, 包括: 离线标签开发, 实时标签开发, 用户特征库开发, 人群计算, 打通数据服务层等
  实时标签开发主要针对给用户展现实时性较强的场景开发相关数据, 如首页新人弹窗, 新人红包等场景;
  【用户特征库围绕用户每次行为明细记录相关数据, 如浏览 搜索 收藏 下单等行为明细】
  人群计算应用在数据服务层之前, 业务方需要组合用户的标签来筛选出对应的人群, 通过人群计算功能组合标签划分出对应的人群, 

4.2.1 用户价值标签案例
  RFM 模型是衡量用户价值的重要工具和方法, 【表4-1】, 划分高低的原则
4.2.2 用户活跃度标签案例
  打上 高活跃 中活跃 低活跃 流失 等标签
  --怎么确定流失周期这是个问题, 【还有活跃用户周期】
	true positive(被正确分类的正例)
	false negative(本来是正例，错分为负例)
	true negative(被正确分类的负例)
	false positive(本来是负例，被错分为正例)
	tp/(tp+fn/fp) 召回率: fn, 精确率: fp 
	准确率(accuracy) = 预测对的/所有 = (TP+TN)/(TP+FN+FP+TN) = 70%
	精确率(precision) = TP/(TP+FP) = 80%
	召回率(recall) = TP/(TP+FN) = 2/3
4.3
4.4.3
4.4.4
4.5 用户特征库开发
  为了进一步从多个维度丰富用户特征, 挖掘用户相关行为, 除了开发用户的标签体系外还要开发用户特征库, 一方面为【个性化推荐、精准营销、商业分析等应用
  提供中间层数据, 另一方面也可以削减不同算法在特征构建时的冗余加工】
  简单来说特征库就是对用户每一次的不同行为(...)及该行为对应标签(或商品品类)进行详细的记录, 以便从用户行为特征中挖掘用户的偏好. 【与开发用户标签相比, 
  用户特征库可以对数据进行汇总统计】, 而标签则相对静态
图4-25 【表4-2 表4-3】

4.5.2
  图4-26 图4-27
  通过用户特征库, 【数据分析师或数据开发人员可以从多个维度钻取用户行为数据进行挖掘】
  除了从用户维度开发特征库, 同样也可以对商品商家开发相应的特征库, 通过特征库可以方便的对用户, 商品, 商家建模, 并分析特征及进行算法应用
4.5.3
  【表4-4】
4.6
  用户在平台上的不同行为具体到用户标签层面有着不同的行为权重, 购买行为的权重要比 加购 收藏...
4.6.1
  TF-IDF(term frequency–inverse document frequency)是一种用于信息检索与数据挖掘的常用加权技术。TF是词频(Term Frequency)，
  IDF是逆文本频率指数(Inverse Document Frequency)
4.6.2
4.6.3
  用户权重=行为类型权重×时间衰减×用户行为次数×TF–IDF计算标签权重
4.7
  4.7.1
  4.7.2
    这个计算逻辑我是没看懂啊

4.9
  典型应用场景: 短信/邮件营销 风控系统 
  数据分析: 分析不同群体的行为特征, 供分析和决策
  BI数据: 我觉得可以认为是一些核心指标吧
4.9.1

4.10

5.1 数据倾斜调优
  map 100% reduce 99% 最后一个小时都没有执行完成

select t1.user_id,t2.order_num from (select user_id from dim_user_info_fact where data_date = "20190101" ) t1 
join ( 
	select t.user_id,sum(t.order_num) as order_num from (
	  select user_id,round(rand()*1000) as rnd,count(1) as order_num 
	  from dw.order_info_fact where pay_status in (1,3) group by user_id,round(rand()*1000)
	) t group by t.user_id
) t2 
on t1.user_id = t2.user_id

5.2 看下代码
5.4
  梳理血缘, 开发中间表减少重复计算
6.2.8

第 7 章
  图7-1 图7-2

第 8 章
8.1.3
  增长黑客理论模型: AARRR 是 Acquisition、Activation、Retention、Revenue、Referral
  用户获取(Acquisition) 用户激活(Activation) 用户留存(Retention) 获得收益(Revenue) 推荐传播(Referral)
  图8-5
  激活: 互联网新客的获客成本是比较高的, 如果不清楚渠道的流量质量, 可能既花了钱又没获得到质量较好的用户, 对于这一些用户用户触达的基本分析是对用户来源渠道进行分析
  注册: 流量激活之后用户只是点进来就走了, 这个流量对产品并没有什么作用, 只有通过高质量的内容, 产品功能契合用户需求...
  留存:
  营收
  传播

  图8-6
  表8-1
8.1.4
  漏斗的主要运用场景有:
    产品流程的关键路径转化跟踪, 如果电商常用的购买流程, 从而帮助业务人员优化产品路径 图8-7
	业务价值路径的转化流程跟踪, 比如 aarrr
	虚拟流程类指标跟踪, 比如按生命周期区分的处于不同生命周期阶段的用户流转形态跟踪	
8.1.5
  略
8.1.6
  图8-9
8.2
8.2.1
  当画像系统产品化以后, 业务人员可以根据业务规则组合相应的标签圈定相应的人群, 将该批人群推送到对应的业务系统中进行运营
8.2.2
  精准营销一般分为流量提升导向和 GMV 提升导向两种情况
  有的业务人员背的 KPI 指标是流量, 因此关注重点是流量提升, 如负责 push 业务线的人员
  有的业务人员背的 KPI 指标是 GMV, 因此关注的重点是 roi(return on investment) 的转化, 如短信营销外呼营销的业务人员
8.3
  在用户画像开发过程中不仅会开发用户标签维度的数据, 同时还会开发用户行为特征库, 商品特征库, 商家特征库等相关数据. 为算法开发人员做用户相关商品,
  内容的个性化推荐提供底层数据支持
  --突然感觉 精准营销和个性化推荐还是不同的, 精准营销主要是圈人, 个性化推荐就是算法了
  另外, 基于画像标签系统可以为用户个性化服务提供支持, 例如针对高质量用户提供 vip 专人客服

第 9 章
average revenue per user;ARPU

9.1.1 
  风控反欺诈预警在游戏 电商 金融 家政 社交等领域有着广泛的应用场景, 例如在家政领域中识别失信风险、借贷风险的用户, 提高从业人员素质和准入门槛, 电商
  领域识别 薅羊毛 下单签收存在异常的用户, 对其进行隔离处理. 这些场景都可以基于用户画像来实现
9.1.2
  ·算法模型服务：它面向的对象是算法模型，主要面向的场景包括智能 营销、个性化推荐和金融风控等，主要通过界面配置方式将算法模型一 键部署为在线API，
支撑智能应用和业务
  
9.2 A/B 人群效果测试
  1) 不同内容标题对流量的影响
  2) 精准推送比普通推送带来的流量提升

9.3 用户生命周期划分与营销
9.3.1
  ARPU 值是指每用户平均收入(总收入/客户数)
  客单价就更简单了，平均每个客户订单的收入(总收入/订单数)
  引入期 成长期 成熟期 衰退期 流失期
  表9-2
  LTV(life time value)
  LTV=(某客户每月的下单频次×客单价×∋利率)×(1/月流失率) =(某客户每月的下单频次×ARPU×毛利率)×[1/(1–月留存率)] =用户生命周期内下单次数×客单价×毛利率
  单个用户毛利=用户生命周期价值٬–获取用户成本–运营成本=CLV–CAC–COC
  投资回报率(Return On Investment，ROI) ROI=转化率×ARPU/(CAC+COC), 转化率一在开源 二在节流
  a. 提高转化率:
    脱离产品的用户流失预警是无意义的, 首先找出用户在哪一步流失的, 例如: 某环节闪退 下单流程过于繁琐 支付渠道过于单一, 追踪关键节点的转化率。
  查看是否有注册渠道存在刷单行为
  b. 提高 ARPU: 
    发放优惠券 红包 抵价金币 促进用户下单
	对用户建立等级体系, 对不同等级设立不同的福利规则, 满足用户对身份高人一等的心理诉求
	建立精准营销平台, 个性化推荐满足用户特定场景需求
	提示用户信息不会被泄露, 满足用户对安全感的诉求
	生日提供满减券或其它福利
  c. 降低成本 
    降低用户获取成本: 优化渠道质量 流失预警 与其实平台共享资源
	降低用户运营成本: ... 就是真正如何利用数据了

9.3.2
  图9-7 仔细分析  
 图9-8 图9-9 图9-11 表9-3

9.3.3 画像在生命周期中的应用
图9-13

9.3.4

9.4.1 
  平台运营人员为促进高价值用户的留存, 制定了运营规则--首日注册的用户如果当日消费满 100 元则对其进行短信营销, 短信中附有平台赠送的红包连接
  -- 我觉得这个确实得用实时了, 因为是当日的操作
9.4.2

9.5
9.5.1 案例背景
  某快消品牌商家在日常销售和运营客户过程中发现, 目前快销品牌同质化严重, 虽然用户复购率较高但是忠诚度较低, 用户普遍对活动敏感, 因此可针对快销品牌的
  易耗性, 定期通过短信渠道精准触达目标用户, 引导其进行复购
9.5.2
  主要从以下几个方面考虑建立规则:
  短信敏感 无效手机号 
  对营销商品感兴趣的用户: 近期曾多次... 或买过牙线等, 考虑用户购买量和产品消耗周期, 一段时间再... 返程票
  合适的时间 合适的产品 合适的渠道 合适的用户

9.6.1 session 分为分析应用-关于用户行为分析

H5 就是移动端web页面
我们以往的APP是使用原生系统内核的，相当于直接在系统上操作，是我们传统意义上的软件，更加稳定。H5的APP先得调用系统的浏览器内核，相当于是在网页中进行
操作，较原生APP稳定性稍差。H5最大的有点是可以跨平台，开发容易。APP的话需要用Android语言和iOS语言各写一套，H5只需写一套。

  分析用户访问规律, 与营销策略等结合, 从而发现可能存在的问题
  用户访问频率 平均停留时长 
  1. 粘性指标: 访问频率, 活跃天数, 
    app 的留存高于 h5 和 web 
  2. 活跃度指标 
    图9-27 及其下, 流量分析真的好重要啊, 
  这两个基本是流量分析

9.6.2
  session 怎么分割呢, 我觉得按时间比较好处理, 两次会话时长超过 30min, sql 也好写一些, 至少能确定 sessionid 所在行, 但是接下来怎么写呢, 好像得写代码了吧
  基于 session 对用户进行分析具有重要的作用, 可以从用户的访问次数, 访问路径, 访问商品品类等多个维度分析用户特征, 分析对首次访问 session 对挖掘用户购买
  行为具有重要意义
9.6.3 
  表9-6
9.6.4
  通过对构建的首访用户行为特征进行透视分析, 可以从用户访问路径, 访问商品品类, 浏览商品价格区间, 对促销敏感程度等维度挖掘首访用户特征
  通过分析首访 session 数据, 可以挖掘用户在哪个时间段访问, 集中访问事件有哪些, 在哪些行为后跳出了访问, 哪些行为促进了最后下单, 访问时长与访问量的增加
  是否能促进下单等维度的内容
  图9-33
  还可以从用户访问时长, 访问间隔等其它维度深入挖掘用户访问特征, 
  通过 session 分析还可找到用户行为路径, 结合桑基图可以清楚地观察到每一个关键点前后的流量进入和流量走向情况 图9-35 及其下内容
  图9-36
  跟踪用户访问路径确实要用 session 分析呀, 用所有行为数据没这个准确
9.7.2
  报表
9.8
  表9-7
